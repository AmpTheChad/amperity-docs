{
  "schemes" : [ "https" ],
  "tags" : [ {
    "name" : "Audit events"
  }, {
    "name" : "Campaigns"
  }, {
    "name" : "Ingest"
  }, {
    "name" : "Segments"
  }, {
    "name" : "Workflow"
  } ],
  "definitions" : {
    "AuditEvent" : {
      "description" : "An audit event",
      "example" : {
        "tenant" : "acme-sb",
        "principal_name" : "bob smith",
        "object_id" : "seg-35GMWpn6Y",
        "happened_at" : "2024-04-09T17:21:06.747Z",
        "tenant_family" : "acme",
        "object_name" : "demo segment",
        "principal_email" : "example@amperity.com",
        "principal_id" : "google-apps|amperity@amperity.com",
        "origin_ip" : "127.0.0.1",
        "event_id" : "ae-21HCWon6Y",
        "event_type" : ":amperity.plugin.credential/updated"
      },
      "type" : "object",
      "properties" : {
        "tenant" : {
          "description" : "The unique identifier for the tenant.",
          "x-example" : "acme-sb",
          "type" : "string"
        },
        "principal_name" : {
          "description" : "The friendly name of the user associated with the activity, if available, otherwise the email address or API key.",
          "type" : "string"
        },
        "object_id" : {
          "description" : "The identifier for the object against which the action occurred.",
          "type" : "string"
        },
        "happened_at" : {
          "description" : "The date and time at which the action occurred. Dates and times are in ISO-8601 format and in UTC.",
          "type" : "string",
          "format" : "date-time"
        },
        "tenant_family" : {
          "description" : "The unique identifier for the tenant family",
          "x-example" : "acme",
          "type" : "string"
        },
        "object_name" : {
          "description" : "A composed string that describes the object(s) for which the action occurred.",
          "type" : "string"
        },
        "principal_email" : {
          "description" : "The email address for the user who initiated the action.",
          "type" : "string"
        },
        "principal_id" : {
          "description" : "The identifier for the user who initiated the action. This user may be an API key or a non-human user.",
          "type" : "string"
        },
        "origin_ip" : {
          "description" : "The IP address that is associated with the user who initiated the action.",
          "type" : "string"
        },
        "event_id" : {
          "description" : "The unique identifier for the event.",
          "type" : "string"
        },
        "event_type" : {
          "description" : "The type of event.",
          "type" : "string"
        }
      },
      "additionalProperties" : false,
      "required" : [ "tenant", "principal_name", "object_id", "happened_at", "tenant_family", "object_name", "principal_email", "principal_id", "origin_ip", "event_id", "event_type" ]
    },
    "AuditEventListEnvelope" : {
      "description" : "Paginated list of AuditEvents",
      "type" : "object",
      "properties" : {
        "total" : {
          "description" : "The total count of all results. This property is only returned when `with_total` is set to `true` in a request.",
          "type" : "integer",
          "format" : "int64"
        },
        "next_token" : {
          "description" : "The cursor value to use in a subsequent request to return the next page of results.",
          "example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        },
        "data" : {
          "description" : "AuditEvent items on this page",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/AuditEvent"
          }
        }
      },
      "additionalProperties" : false,
      "required" : [ "data" ]
    },
    "Campaign" : {
      "description" : "A campaign",
      "example" : {
        "id" : "cc-21HCWon6Y",
        "name" : "Holiday Campaign"
      },
      "type" : "object",
      "properties" : {
        "id" : {
          "description" : "Campaign id",
          "type" : "string"
        },
        "name" : {
          "description" : "Campaign name",
          "type" : "string"
        },
        "deliver_at" : {
          "description" : "The instant this campaign should be delivered",
          "type" : "string",
          "format" : "date-time"
        }
      },
      "additionalProperties" : false,
      "required" : [ "id", "name" ]
    },
    "CampaignListEnvelope" : {
      "description" : "Paginated list of Campaigns",
      "type" : "object",
      "properties" : {
        "total" : {
          "description" : "The total count of all results. This property is only returned when `with_total` is set to `true` in a request.",
          "type" : "integer",
          "format" : "int64"
        },
        "next_token" : {
          "description" : "The cursor value to use in a subsequent request to return the next page of results.",
          "example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        },
        "data" : {
          "description" : "Campaign items on this page",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/Campaign"
          }
        }
      },
      "additionalProperties" : false,
      "required" : [ "data" ]
    },
    "ErrorResponse" : {
      "description" : "An unexpected error response",
      "example" : {
        "status" : 400,
        "message" : "An unexpected error occurred."
      },
      "type" : "object",
      "properties" : {
        "status" : {
          "description" : "The status code of the response",
          "type" : "integer",
          "format" : "int64"
        },
        "message" : {
          "description" : "Description of the error",
          "type" : "string"
        }
      },
      "additionalProperties" : false,
      "required" : [ "status", "message" ]
    },
    "IngestFeedDetails" : {
      "description" : "Details on an ingest job for a single feed",
      "example" : {
        "errors" : 200,
        "feed_id" : "df-5L6d1veh",
        "read" : 1000,
        "rejected" : 200,
        "updated" : 200,
        "started_at" : "2024-06-01T04:02:54.433Z",
        "state" : "succeeded",
        "ended_at" : "2024-06-01T04:02:57.433Z",
        "files" : [ {
          "file_id" : "cb-20240618-71992-SF3Uz/part0.avro",
          "name" : "part0.avro",
          "read" : 1000,
          "errors" : 200
        } ],
        "inserted" : 400,
        "table_name" : "My table",
        "job_id" : "isj-1f73r9u2"
      },
      "type" : "object",
      "properties" : {
        "errors" : {
          "description" : "The total count of errors for this feed",
          "type" : "integer",
          "format" : "int64"
        },
        "feed_id" : {
          "description" : "The feed ID",
          "type" : "string"
        },
        "read" : {
          "description" : "The total count of records processed for this feed",
          "type" : "integer",
          "format" : "int64"
        },
        "rejected" : {
          "description" : "The total count of records rejected for this feed",
          "type" : "integer",
          "format" : "int64"
        },
        "updated" : {
          "description" : "The total count of records updated for this feed",
          "type" : "integer",
          "format" : "int64"
        },
        "started_at" : {
          "description" : "The timestamp the feed began ingesting",
          "type" : "string",
          "format" : "date-time"
        },
        "state" : {
          "description" : "The state of the job",
          "type" : "string"
        },
        "ended_at" : {
          "description" : "The timestamp the feed finished ingesting",
          "type" : "string",
          "format" : "date-time"
        },
        "files" : {
          "description" : "Array of IngestFileDetails",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/IngestFileDetails"
          }
        },
        "inserted" : {
          "description" : "The total count of records added for this feed",
          "type" : "integer",
          "format" : "int64"
        },
        "table_name" : {
          "description" : "The name of the table updated",
          "type" : "string"
        },
        "job_id" : {
          "description" : "The identifier of the job",
          "type" : "string"
        }
      },
      "additionalProperties" : false,
      "required" : [ "errors", "feed_id", "read", "rejected", "updated", "started_at", "state", "ended_at", "files", "inserted", "table_name", "job_id" ]
    },
    "IngestFileDetails" : {
      "description" : "Details on an ingest job for a single file",
      "example" : {
        "file_id" : "cb-20240618-71992-SF3Uz/part0.avro",
        "name" : "part0.avro",
        "read" : 1000,
        "errors" : 200
      },
      "type" : "object",
      "properties" : {
        "file_id" : {
          "description" : "The identifier for the file",
          "type" : "string"
        },
        "read" : {
          "description" : "The total count of records processed in this file",
          "type" : "integer",
          "format" : "int64"
        },
        "name" : {
          "description" : "The human readable identifier for the file",
          "type" : "string"
        },
        "errors" : {
          "description" : "The count of errored records in this file",
          "type" : "integer",
          "format" : "int64"
        }
      },
      "additionalProperties" : false,
      "required" : [ "file_id", "read", "errors" ]
    },
    "IngestJobDetails" : {
      "description" : "A summary of records, files, and feeds ingested in this job",
      "example" : {
        "id" : "isj-1f73r9u2",
        "tables" : [ {
          "errors" : 200,
          "feed_id" : "df-5L6d1veh",
          "read" : 1000,
          "rejected" : 200,
          "updated" : 200,
          "started_at" : "2024-06-01T04:02:54.433Z",
          "state" : "succeeded",
          "ended_at" : "2024-06-01T04:02:57.433Z",
          "files" : [ {
            "file_id" : "cb-20240618-71992-SF3Uz/part0.avro",
            "name" : "part0.avro",
            "read" : 1000,
            "errors" : 200
          } ],
          "inserted" : 400,
          "table_name" : "My table",
          "job_id" : "isj-1f73r9u2"
        } ],
        "workflow_id" : "wf-20240618-3423-b45"
      },
      "type" : "object",
      "properties" : {
        "id" : {
          "description" : "The identifier of the job",
          "type" : "string"
        },
        "workflow_id" : {
          "description" : "The ID of the workflow in which this job ran",
          "type" : "string"
        },
        "tables" : {
          "description" : "Array of per-feed ingest details",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/IngestFeedDetails"
          }
        }
      },
      "additionalProperties" : false,
      "required" : [ "id", "workflow_id", "tables" ]
    },
    "Segment" : {
      "description" : "A segment",
      "example" : {
        "id" : "mx-seg-21HCWon6Y",
        "name" : "Washington Purchasers"
      },
      "type" : "object",
      "properties" : {
        "id" : {
          "description" : "Segment id",
          "type" : "string"
        },
        "name" : {
          "description" : "Segment name",
          "type" : "string"
        }
      },
      "additionalProperties" : false,
      "required" : [ "id", "name" ]
    },
    "SegmentListEnvelope" : {
      "description" : "Paginated list of Segments",
      "type" : "object",
      "properties" : {
        "total" : {
          "description" : "The total count of all results. This property is only returned when `with_total` is set to `true` in a request.",
          "type" : "integer",
          "format" : "int64"
        },
        "next_token" : {
          "description" : "The cursor value to use in a subsequent request to return the next page of results.",
          "example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        },
        "data" : {
          "description" : "Segment items on this page",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/Segment"
          }
        }
      },
      "additionalProperties" : false,
      "required" : [ "data" ]
    },
    "Task" : {
      "description" : "A task within a workflow",
      "example" : {
        "tenant" : "acme2-max",
        "timeout_ms" : 172800000,
        "workflow_id" : "wf-20240619-14418-6UhqSe",
        "run_id" : "orb-20240619-EDnCxzmhrLN",
        "task_definition_id" : "send/ct-2yrcnb2Hn/ptg-2XsDnXwEu/pd-2ycaK3gfh",
        "state" : "failed",
        "task_definition_type" : "campaign.send",
        "ended_at" : "2024-06-19T04:03:10.094Z",
        "label" : "Sending treatment customer_attribute_group to destination - S3",
        "id" : "wft-20240619-14574-6kyYdY",
        "state_changed_at" : "2024-06-19T04:03:10.094Z",
        "error" : {
          "attribution" : "customer",
          "data" : {
            "error_code" : "InvalidAccessKeyId",
            "id" : "s3",
            "request_id" : "Z74HDXNGJ7ZPMRVS",
            "retryable?" : false
          },
          "message" : "The credential does not provide access to the given resource. Pl\n                      ease update the credential's access or try another credential.",
          "type" : "amperity.plugin.error/invalid-credentials"
        },
        "created_at" : "2024-06-19T04:02:54.433Z"
      },
      "type" : "object",
      "properties" : {
        "tenant" : {
          "description" : "The unique identifier for the tenant.",
          "x-example" : "acme-sb",
          "type" : "string"
        },
        "timeout_ms" : {
          "description" : "The length of time in milliseconds after which to forcibly kill a running task instance",
          "type" : "number",
          "format" : "double"
        },
        "workflow_id" : {
          "description" : "Unique identifier for the workflow",
          "type" : "string"
        },
        "run_id" : {
          "description" : "Unique identifier for the task instance to support execution engines\n   that can't provide an external run id",
          "type" : "string"
        },
        "task_definition_id" : {
          "description" : "Identifier for a task definition",
          "type" : "string"
        },
        "state" : {
          "description" : "Current task instance state.",
          "type" : "string"
        },
        "task_definition_type" : {
          "description" : "A keyword for identify different task types",
          "type" : "string"
        },
        "ended_at" : {
          "description" : "Time the task reached a terminal state",
          "type" : "string",
          "format" : "date-time"
        },
        "execution_type" : {
          "description" : "The execution type for the workflow",
          "type" : "string"
        },
        "label" : {
          "description" : "Human-readable label for a task-instance",
          "type" : "string"
        },
        "id" : {
          "description" : "Unique identifier for the task instance",
          "type" : "string"
        },
        "state_changed_at" : {
          "description" : "Time the task instance most recently changed state",
          "type" : "string",
          "format" : "date-time"
        },
        "error" : {
          "$ref" : "#/definitions/WorkflowError"
        },
        "created_at" : {
          "description" : "Time the task instance was created",
          "type" : "string",
          "format" : "date-time"
        }
      },
      "additionalProperties" : false,
      "required" : [ "tenant", "workflow_id", "task_definition_id", "state", "task_definition_type", "label", "id", "created_at" ]
    },
    "Workflow" : {
      "description" : "Represenation of a workflow",
      "example" : {
        "created_at" : "2024-06-19T04:00:18.764Z",
        "ended_at" : "2024-06-19T04:03:10.119Z",
        "error" : {
          "attribution" : "customer",
          "data" : {
            "error_code" : "InvalidAccessKeyId",
            "id" : "s3",
            "request_id" : "Z47DXHNGJ7ZPMRVS",
            "retryable?" : false
          },
          "message" : "The credential does not provide access to the given resource. Please update \n                      the credential's access or try another credential.",
          "type" : "amperity.plugin.error/invalid-credentials"
        },
        "id" : "wf-20240619-14418-6UhqSe",
        "name" : "Customer Attribute Daily",
        "state" : "failed",
        "tenant" : "acme2-max",
        "type" : "campaign.send"
      },
      "type" : "object",
      "properties" : {
        "tenant" : {
          "description" : "The unique identifier for the tenant.",
          "x-example" : "acme-sb",
          "type" : "string"
        },
        "warn_after_ms" : {
          "description" : "The time in milliseconds we should send a running long duration warning",
          "type" : "number",
          "format" : "double"
        },
        "principal_name" : {
          "description" : "Human-readable name for who or what created the workflow",
          "type" : "string"
        },
        "launched_version" : {
          "description" : "The ent version that was launched with the workflow",
          "type" : "string"
        },
        "name" : {
          "description" : "Human-readable identifier for the workflow",
          "type" : "string"
        },
        "principal_email" : {
          "description" : "Email address for who or what created the workflow",
          "type" : "string"
        },
        "principal_id" : {
          "description" : "Principal id for who or what created the workflow",
          "type" : "string"
        },
        "task_instances" : {
          "description" : "The list of tasks on the workflow.",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/Task"
          }
        },
        "type" : {
          "description" : "Keyword identifying the type of workflow",
          "type" : "string"
        },
        "state" : {
          "description" : "Current workflow state.",
          "type" : "string"
        },
        "current_version" : {
          "description" : "The current ent version associated with the workflow",
          "type" : "string"
        },
        "ended_at" : {
          "description" : "Time the workflow reached a terminal state",
          "type" : "string",
          "format" : "date-time"
        },
        "id" : {
          "description" : "Unique identifier for the workflow",
          "type" : "string"
        },
        "error" : {
          "$ref" : "#/definitions/WorkflowError"
        },
        "created_at" : {
          "description" : "Time the workflow was created",
          "type" : "string",
          "format" : "date-time"
        }
      },
      "additionalProperties" : false,
      "required" : [ "tenant", "type", "state", "id", "created_at" ]
    },
    "WorkflowError" : {
      "description" : "An error on the workflow. Populated only for error states.",
      "type" : "object",
      "properties" : {
        "type" : {
          "description" : "The type of workflow error.",
          "type" : "string"
        },
        "message" : {
          "description" : "The error message.",
          "type" : "string"
        },
        "data" : {
          "$ref" : "#/definitions/WorkflowErrorData"
        },
        "attribution" : {
          "description" : "The underlying cause of the error, either customer or platform.",
          "type" : "string"
        }
      },
      "additionalProperties" : false,
      "required" : [ "type", "message" ]
    },
    "WorkflowErrorData" : {
      "description" : "Any additional data associated with this error.",
      "type" : "object",
      "additionalProperties" : { }
    },
    "WorkflowListEnvelope" : {
      "description" : "A paginated list of workflows.",
      "type" : "object",
      "properties" : {
        "total" : {
          "description" : "The total count of all results. This property is only returned when `with_total` is set to `true` in a request.",
          "type" : "integer",
          "format" : "int64"
        },
        "next_token" : {
          "description" : "The cursor value to use in a subsequent request to return the next page of results.",
          "example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        },
        "data" : {
          "description" : "Workflow items in this page",
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/Workflow"
          }
        }
      },
      "additionalProperties" : false,
      "required" : [ "data" ]
    }
  },
  "produces" : [ "application/json" ],
  "paths" : {
    "/audit-events" : {
      "get" : {
        "parameters" : [ {
          "in" : "query",
          "name" : "with_total",
          "description" : "Set this value to `true` to include a total count of all results. Default value: `false`. Obtaining the total count of all results can be an expensive operation when there is a high number of pages in the results set.",
          "required" : false,
          "type" : "boolean"
        }, {
          "in" : "query",
          "name" : "limit",
          "description" : "The maximum number of records to include in a single page of results.",
          "required" : false,
          "type" : "integer",
          "format" : "int64"
        }, {
          "in" : "query",
          "name" : "api_version",
          "description" : "A supported version of the Amperity API. You may use the `api-version` request header instead of the `api-version` request parameter.",
          "required" : false,
          "x-example" : "2024-04-01",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "next_token",
          "description" : "An opaque token that is used to paginate results. Omit the `next_token` property to return the first page. Use the cursor value for `next_token` that was returned in a response to view the next page of results.",
          "required" : false,
          "x-example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "happened_from",
          "description" : "The start date (inclusive) that defines the beginning of the time range for which audit events will be returned. The date should be in ISO-8601 format and in UTC.",
          "required" : false,
          "x-example" : "2023-01-03T11:11:11Z",
          "type" : "string",
          "format" : "date-time"
        }, {
          "in" : "query",
          "name" : "happened_to",
          "description" : "The end date (exclusive) that defines the end of the time range for which audit events will be returned. The date should be in ISO-8601 format and in UTC.",
          "required" : false,
          "x-example" : "2023-01-03T22:22:22Z",
          "type" : "string",
          "format" : "date-time"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "List of audit events",
            "schema" : {
              "$ref" : "#/definitions/AuditEventListEnvelope"
            }
          }
        },
        "description" : "Use the Audit Events endpoint to return a log of user activity that occurred within your tenant. When requesting events for a production tenant, all events (including events from sandboxes created for that tenant) are included in the response. When requesting events from a sandbox, only events from that sandbox are included in the response.",
        "summary" : "List audit events",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Audit events" ],
        "operationId" : "list-events"
      }
    },
    "/campaigns" : {
      "get" : {
        "parameters" : [ {
          "in" : "query",
          "name" : "with_total",
          "description" : "Set this value to `true` to include a total count of all results. Default value: `false`. Obtaining the total count of all results can be an expensive operation when there is a high number of pages in the results set.",
          "required" : false,
          "type" : "boolean"
        }, {
          "in" : "query",
          "name" : "limit",
          "description" : "The maximum number of records to include in a single page of results.",
          "required" : false,
          "type" : "integer",
          "format" : "int64"
        }, {
          "in" : "query",
          "name" : "api_version",
          "description" : "A supported version of the Amperity API. You may use the `api-version` request header instead of the `api-version` request parameter.",
          "required" : false,
          "x-example" : "2024-04-01",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "next_token",
          "description" : "An opaque token that is used to paginate results. Omit the `next_token` property to return the first page. Use the cursor value for `next_token` that was returned in a response to view the next page of results.",
          "required" : false,
          "x-example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "destination_data_template_id",
          "description" : "Use this parameter to restrict the list of campaigns that are returned to only campaigns that are configured to use specific data template.",
          "required" : false,
          "x-example" : "ct-2QLLqXBEq",
          "type" : "string"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "List of campaigns",
            "schema" : {
              "$ref" : "#/definitions/CampaignListEnvelope"
            }
          }
        },
        "description" : "Use the Campaigns endpoint to return a list of campaigns from your tenant. You may restrict the list of campaigns to those associated with a specific data template.",
        "summary" : "List campaigns",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Campaigns" ],
        "operationId" : "list-campaign"
      }
    },
    "/segments" : {
      "get" : {
        "parameters" : [ {
          "in" : "query",
          "name" : "with_total",
          "description" : "Set this value to `true` to include a total count of all results. Default value: `false`. Obtaining the total count of all results can be an expensive operation when there is a high number of pages in the results set.",
          "required" : false,
          "type" : "boolean"
        }, {
          "in" : "query",
          "name" : "limit",
          "description" : "The maximum number of records to include in a single page of results.",
          "required" : false,
          "type" : "integer",
          "format" : "int64"
        }, {
          "in" : "query",
          "name" : "api_version",
          "description" : "A supported version of the Amperity API. You may use the `api-version` request header instead of the `api-version` request parameter.",
          "required" : false,
          "x-example" : "2024-04-01",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "next_token",
          "description" : "An opaque token that is used to paginate results. Omit the `next_token` property to return the first page. Use the cursor value for `next_token` that was returned in a response to view the next page of results.",
          "required" : false,
          "x-example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "List of segments",
            "schema" : {
              "$ref" : "#/definitions/SegmentListEnvelope"
            }
          }
        },
        "description" : "Use the Segments endpoint to return a list of segments from your tenant.",
        "summary" : "List segments",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Segments" ],
        "operationId" : "list-segment"
      }
    },
    "/ingest/jobs/{job-id}" : {
      "get" : {
        "parameters" : [ {
          "in" : "path",
          "name" : "job-id",
          "description" : "The id of the ingest job",
          "required" : true,
          "type" : "string"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "A summary of records, files, and feeds ingested in this job",
            "schema" : {
              "$ref" : "#/definitions/IngestJobDetails"
            }
          }
        },
        "summary" : "Ingest job details.",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Ingest" ]
      }
    },
    "/workflow/runs" : {
      "get" : {
        "parameters" : [ {
          "in" : "query",
          "name" : "type",
          "description" : "Return workflows that match the specified workflow type.",
          "required" : false,
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "next_token",
          "description" : "An opaque token that is used to paginate results. Omit the `next_token` property to return the first page. Use the cursor value for `next_token` that was returned in a response to view the next page of results.",
          "required" : false,
          "x-example" : "ZVEy1iwsKBs9a6H",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "state",
          "description" : "Return workflows that match the specified workflow state.",
          "required" : false,
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "limit",
          "description" : "The maximum number of records to include in a single page of results.",
          "required" : false,
          "type" : "integer",
          "format" : "int64"
        }, {
          "in" : "query",
          "name" : "ended_from",
          "description" : "A timestamp that defines the start (inclusive) of the time window in which workflows stopped running. Must be in ISO-8061 format and in UTC. Only workflows with an \"ended_at\" value that falls within the \"ended_from\"-\"ended_to\" time window will be returned.",
          "required" : false,
          "type" : "string",
          "format" : "date-time"
        }, {
          "in" : "query",
          "name" : "created_from",
          "description" : "A timestamp that defines the start (inclusive) of the time window in which workflows started to run. Must be in ISO-8061 format and in UTC. Only workflows with a \"created_at\" value that falls within the \"created_from\"-\"created_to\" time window will be returned.",
          "required" : false,
          "type" : "string",
          "format" : "date-time"
        }, {
          "in" : "query",
          "name" : "api_version",
          "description" : "A supported version of the Amperity API. You may use the `api-version` request header instead of the `api-version` request parameter.",
          "required" : false,
          "x-example" : "2024-04-01",
          "type" : "string"
        }, {
          "in" : "query",
          "name" : "ended_to",
          "description" : "A timestamp that defines the end (exclusive) of the time window in which workflows stopped running. Must be in ISO-8061 format and in UTC. Only workflows with an \"ended_at\" value that falls within the \"ended_from\"-\"ended_to\" time window will be returned.",
          "required" : false,
          "type" : "string",
          "format" : "date-time"
        }, {
          "in" : "query",
          "name" : "created_to",
          "description" : "A timestamp that defines the end (exclusive) of the time window in which workflows started to run. Must be in ISO-8061 format and in UTC. Only workflows with a \"created_at\" value that falls within the \"created_from\"-\"created_to\" time window will be returned.",
          "required" : false,
          "type" : "string",
          "format" : "date-time"
        }, {
          "in" : "query",
          "name" : "with_total",
          "description" : "Set this value to `true` to include a total count of all results. Default value: `false`. Obtaining the total count of all results can be an expensive operation when there is a high number of pages in the results set.",
          "required" : false,
          "type" : "boolean"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "List of workflows",
            "schema" : {
              "$ref" : "#/definitions/WorkflowListEnvelope"
            }
          }
        },
        "description" : "Return a list of workflows that exist within the date ranges defined in the request.",
        "summary" : "List workflows",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Workflow" ]
      }
    },
    "/workflow/runs/{workflow-id}" : {
      "get" : {
        "parameters" : [ {
          "in" : "query",
          "name" : "view",
          "description" : "Set to \"overview\" to return only \"created_at\", \"ended_at\", \"id\", \"name\", \"state\", \"tenant\", and \"type\". Set to \"verbose\" to return all response parameters, including for any tasks that were started by the workflow.",
          "required" : false,
          "type" : "string"
        }, {
          "in" : "path",
          "name" : "workflow-id",
          "description" : "The workflow ID.",
          "required" : true,
          "type" : "string"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "Workflow details",
            "schema" : {
              "$ref" : "#/definitions/Workflow"
            }
          }
        },
        "description" : "Return details for a specific workflow.",
        "summary" : "Get workflow details",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Workflow" ]
      }
    },
    "/workflow/runs/{workflow-id}/stop" : {
      "post" : {
        "parameters" : [ {
          "in" : "path",
          "name" : "workflow-id",
          "description" : "The workflow ID.",
          "required" : true,
          "type" : "string"
        } ],
        "responses" : {
          "400" : {
            "description" : "Bad Request",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "401" : {
            "description" : "Authentication Required",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "403" : {
            "description" : "Not Authorized",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "404" : {
            "description" : "Not Found"
          },
          "405" : {
            "description" : "Method Not Allowed",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "500" : {
            "description" : "Internal Error",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "503" : {
            "description" : "Service Unavailable",
            "schema" : {
              "$ref" : "#/definitions/ErrorResponse"
            }
          },
          "200" : {
            "description" : "Workflow stopped",
            "schema" : {
              "$ref" : "#/definitions/Workflow"
            }
          }
        },
        "description" : "Stop a workflow.",
        "summary" : "Stop a workflow",
        "produces" : [ "application/json" ],
        "consumes" : [ "application/json" ],
        "tags" : [ "Workflow" ]
      }
    }
  },
  "consumes" : [ "application/json" ],
  "host" : "app.amperity.com",
  "info" : {
    "title" : "Amperity API",
    "version" : "2024-04-01",
    "description" : "# Overview\n\n## Who is this for?\n\nThis documentation is for developers creating their own integration with [Amperity](https://docs.amperity.com/reference/api/) APIs.\n\n\n## Authentication\n\nAPI calls must be authenticated with an [API Key](https://docs.amperity.com/reference/api/).\n\n\n## Service URL\n\nThe base service URL follows the pattern `https://<tenant-id>.amperity.com/api`, for example:\n\n```sh\n> curl https://acme.amperity.com/api/campaigns?limit=2 \\\\\n  -H \\\"Authorization: Bearer <token>\\\" \\\\\n  -H \\\"Amperity-Tenant: acme\\\" \\\\\n  -H \\\"api-version: 2024-04-01\\\"\n```\n\nWhen working with a [sandbox tenant](https://docs.amperity.com/datagrid/sandboxes.html),\nuse the parent tenant in the URL and the sandbox tenant id in the `Amperity-Tenant` header:\n\n```sh\n> curl https://acme.amperity.com/api/campaigns?limit=2 \\\\\n  -H \\\"Authorization: Bearer <token>\\\" \\\\\n  -H \\\"Amperity-Tenant: acme-sb-2zezitlj\\\" \\\\\n  -H \\\"api-version: 2024-04-01\\\"\n```\n\n\n## Headers\n\nCommon headers used in Amperity APIs:\n\n- `Authorization`: *(required)* The bearer authentication header, typically an API Key\n- `api-version`: *(required)* The version of the API to use, e.g. `2024-04-01`.  See [Versioning](#section/Overview/Versioning) for more information. This can also be provided as a query parameter, but the value provided in the header will be used over any query parameter in event of conflicting values.\n- `Amperity-Tenant`: *(required)* The tenant id or sandbox tenant id for the request, e.g. `acme2`\n\n\n## Pagination\n\nAmperity APIs implement standard cursor based pagination scheme for all `GET` resource collections.\nWhen you send a request to an endpoint that supports pagination, the response body returns the\nfirst page of results. When there are no more results, the `next_token` will not be present.\nTo iterate through a collection, use the following URL query parameters:\n\n- `with_total`: when true, include a total count of all results. Obtaining the record count may slow down API response time. Defaults to false.\n- `next_token`: opaque token used to paginate through results.  Omit the `next_token` parameter to get the first page of results.\n- `limit`: The maximum number of records to include in a single page of results. The endpoint may decide to return fewer results than the caller asked for, even if there is more data available.\n\nThe response object will include the following fields:\n\n- `data`: JSON array of values in the current page of results.\n- `next_token`: The cursor value to use in a subsequent request to fetch the next page of results.  When there are no more results, the `next_token` will not be included in the response.  If an endpoint returns a full listing it will have the same response shape as one that paginates but has no more results.\n- `total`: When requested with `with_total`, the total number of records.\n\n\n## Error Response\n\nFor requests that result in errors, a standard error response shape will be returned with the fields:\n\n- `status`: The status code of the error\n- `message`: A human readable error message\n- `request_id`: An optional Amperity request id\n- `trace_id`: An optional Amperity trace id for use in tracing\n\nExample:\n```json\n{\\\"status\\\": 400,\n \\\"message\\\": \\\"Error updating database: Can't rename to existing database table 'Customized_UIT'\\\",\n \\\"request_id\\\":\\\"6ce22158-e79a-4968-8898-35dbe4eb90e1\\\",\n \\\"trace_id\\\":\\\"1c9d3727772ac1af0f590aeeeda1aded\\\"}\n```\n \n## Versioning\n\nVersioning is controlled by a `api-version` header, which is a date in `YYYY-MM-DD` format that\nrepresents the \\\"version\\\" of the API which you expect from Amperity. It is designed to give\ndevelopers the freedom to adapt to Amperity API changes on their own schedule. \n\nAll API requests *require* a version parameter; we will not default you to the latest version.\nThis gives developers control over the time period in which to call our continuously updated API.\nIf you do not include an version in the request, an error will be returned. In order to stay up\nto date with the latest changes, Amperity recommends updating your version as often as possible.\nUsing a single version across all API calls will avoid any incompatibilities between APIs.\n\n\n### Supported Versions\n\nThe currently supported versions are:\n* `2024-04-01`\n\n\n### Unstable\n\nDuring development, Amperity may release APIs for testing using the `unstable` version identifier.\nUnstable versions contain features that are still in progress and may not be backward compatible.\nThere are no guarantees around customer support, notification of changes, breaking changes, or\navailability of unreleased versions.\n\n\n### Lifespan\n\nAmperity will periodically release new versions throughout the year and each version will be\nsupported for at least 1 year.  Amperity will provide at least 6 months notice before marking\na version as unsupported. API calls made with a version identifier that is no longer supported\nwill error with a 400 response.  Developers should monitor our API documentation to know when\nversions are no longer supported.\n\n\n### Deprecation\n\nAs Amperity continues to grow and evolve, we will occasionally deprecate fields or entire endpoints.\nFields or parameters being deprecated will be annotated as such in the documentation. To warn\ndevelopers of impending deprecation for an endpoint, a `Deprecation` header will be included and a\n`Sunset` header may be included.  The `Deprecation` header will either be `true` to indicate an\nendpoint has been deprecated or a future date as described in the\n[Deprecation Header proposal](https://datatracker.ietf.org/doc/html/draft-ietf-httpapi-deprecation-header).\nIn addition, a [Sunset header](https://datatracker.ietf.org/doc/html/rfc8594) may be included to\nindicate the date at which the endpoint may cease to function and return a 4xx response.\n\nThe `Deprecation` and `Sunset` headers will be added 6 months prior to an endpoint's removal.  The\nvalue of the `Deprecation` header will be 3 months before the endpoint's removal date.  The value\nof the `Sunset` header is the removal date.\n\nThe purpose of the `Deprecation` and `Sunset` headers is merely informational.  We recommend clients\nbuild alerts on this monitoring information to ensure the proper amount of time for migration. Example:\n\n```\nDeprecation: Tue, 1 Sep 2024 23:59:59 GMT\nSunset: Wed, 1 Dec 2024 23:59:59 GMT\n```\n\n\n### Breaking Changes\n\nAny breaking changes will be released in a new API version.  A breaking change is any change\nthat requires a third-party developer to do any migration work to maintain the existing\nfunctionality of their application. Some examples of breaking changes are:\n\n* adding pagination to a resource collection response\n* adding a new or modifying an existing validation to an existing resource\n* requiring a parameter that wasn’t required before\n* changing existing error response codes/messages\n* changing the data type of an existing field\n* changing supported filtering on existing endpoints\n* removing an endpoint\n* removing or renaming a parameter or response field\n* removing an enum value\n* adding a new feature that will change the meaning of a field\n* changing the URL structure of an existing endpoint\n\nAdditive changes are non-breaking:\n* adding an endpoint\n* adding an optional parameter\n* adding an optional request header\n* adding a response field or header\n* adding an enum value\n\n",
    "contact" : {
      "name" : "Amperity Support",
      "url" : "https://docs.amperity.com/",
      "email" : "support@amperity.com"
    },
    "x-logo" : {
      "url" : "_static/logo-api.png",
      "backgroundColor" : "#000",
      "altText" : "Amperity API Docs"
    }
  },
  "swagger" : "2.0",
  "basePath" : "/api"
}
